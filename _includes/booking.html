<script>
  searchButton.addEventListener("click", () => {
    const checkin = document.getElementById("checkin").value;
    const checkout = document.getElementById("checkout").value;
    const guests = document.getElementById("guests").value;
    const dogChecked = document.getElementById("dog").checked;

    // Affichage du message d'attente et animation
    searchButton.innerText = "Patientez quelques instants";
    searchButton.disabled = true;
    searchButton.style.cursor = "wait";
    searchButton.classList.add("pulsing");

    // Apply a 3% discount before storing the booking data
    const discountedTotalPreTax = currentTotalPreTax * 0.97;

    const bookingData = {
      checkin: checkin,
      checkout: checkout,
      guests: guests,
      hasDog: dogChecked,
      cleaningFee: cleaningFee,
      currentTotalPreTax: discountedTotalPreTax
    };

    localStorage.setItem("bookingData", JSON.stringify(bookingData));

    window.location.href = "/contact.html";
  });
</script>
