<section id="amenities">
  <h2 style="margin-bottom: 1rem;">Équipements pour votre votre confort</h2>
  
  <p style="text-align: center; max-width: 800px; margin: 0 auto 2rem auto; line-height: 1.6;">
    Parce que nous savons que vos vacances sont précieuses, le chalet est entièrement équipé avec tout ce dont vous pourriez avoir besoin pour passer des moments inoubliables avec vos proches, comme si vous séjourniez dans un hôtel. Chaque pièce a été pensée en fonction de ce dont vous pourriez avoir besoin.
  </p>
  
  <div class="amenity-grid">
    <!-- 1) Salle de bain -->
    <div class="amenity-block" data-default-items="3" data-mobile-items="2">
      <div class="amenity-header">
        <h3><i class="amenity-icon fas fa-bath"></i>Salle de bain</h3>
      </div>
      <ul>
        <li>1 salle de bain complète</li>
	<li> 1 salle d'eau</li>
        <li>Baignoire</li>
        <li>Gel douche</li>
        <li>Shampooing, revitalisant et savon pour le corps</li>
        <li>Sèche-cheveux</li>
        <li>Serviettes de bain, savon et papier hygiénique toujours inclus</li>
      </ul>
      <button class="amenity-toggle-btn">Afficher plus</button>
    </div>

    <!-- 2) Chambres -->
    <div class="amenity-block" data-default-items="4" data-mobile-items="2">
      <div class="amenity-header">
        <h3><i class="amenity-icon fas fa-bed"></i>Chambres</h3>
      </div>
      <ul>
        <li>2 chambres avec lit queen</li>
        <li>1 chambre avec lit pleine grandeur</li>
 	<li>Prise avec chargeurs USB dans chaque chambre</li>
        <li>Literie complète fournie : draps, oreillers et couvertures confortables</li>
        <li>Stores opaques dans chaque chambre, pour un sommeil réparateur</li>
        <li>Meubles de rangement avec tiroirs dans chaque chambre</li>
        <li>Oreillers et couvertures supplémentaires</li>
  	<li>Ceintres pour vêtements</li>
      </ul>
      <button class="amenity-toggle-btn">Afficher plus</button>
    </div>

    <!-- 3) Divertissement et technologie -->
    <div class="amenity-block" data-default-items="3" data-mobile-items="2">
      <div class="amenity-header">
        <h3><i class="amenity-icon fas fa-tv"></i>Divertissement et technologie</h3>
      </div>
      <ul>
        <li>Téléviseur HD 55 pouces avec Chromecast et Apple TV</li>
        <li>Système audio Sonos</li>
        <li>Sélection de livres et magazines</li>
        <li>Jeux de société</li>
      </ul>
      <button class="amenity-toggle-btn">Afficher plus</button>
    </div>

    <!-- 4) Internet et espace de travail dédié -->
    <div class="amenity-block" data-default-items="2" data-mobile-items="1">
      <div class="amenity-header">
        <h3><i class="amenity-icon fas fa-wifi"></i>Internet et espace de travail dédié</h3>
      </div>
      <ul>
        <li>Wi-Fi ultra-rapide (Fibre 1.5 giga), idéal pour le télétravail, streaming en 4K et les appels vidéo</li>
        <li>Bureau de travail privé et intime avec chaise ergonomique</li>
      </ul>
      <button class="amenity-toggle-btn">Afficher plus</button>
    </div>

    <!-- 5) Équipements pour bébés et enfants -->
    <div class="amenity-block" data-default-items="3" data-mobile-items="2">
      <div class="amenity-header">
        <h3><i class="amenity-icon fas fa-baby"></i>Équipements pour bébés et enfants</h3>
      </div>
      <ul>
        <li>Parc pour bébé / lit pour bébé avec matelas confortable</li>
        <li>Chaise haute pour bébé avec harnais et plateau-repas</li>
	<li>Barrière amovible de sécurité pour les escaliers</li>
        <li>Vaisselle pour enfants</li>
        <li>Collection de livres et de jouets pour tous les âges</li>
      </ul>
      <button class="amenity-toggle-btn">Afficher plus</button>
    </div>

    <!-- 6) Confort et sécurité -->
    <div class="amenity-block" data-default-items="4" data-mobile-items="3">
      <div class="amenity-header">
        <h3><i class="amenity-icon fas fa-shield-alt"></i>Confort et sécurité</h3>
      </div>
      <ul>
        <li>Chauffé et climatisé</li>
        <li>Foyer intérieur au bois</li>
	<li>Bois toujours inclus pour le foyer</li>
        <li>Détecteurs de fumée et de monoxyde de carbone</li>
        <li>Extincteur d'incendie</li>
        <li>Trousse de premiers soins</li>
	<li>Ventilateur de plafond</li>
      </ul>
      <button class="amenity-toggle-btn">Afficher plus</button>
    </div>

    <!-- 7) Buanderie -->
    <div class="amenity-block" data-default-items="3" data-mobile-items="2">
      <div class="amenity-header">
        <h3><i class="amenity-icon fas fa-tshirt"></i>Buanderie</h3>
      </div>
      <ul>
        <li>Laveuse et sécheuse incluses et à votre disposition pendant tout votre séjour</li>
        <li>Savon à lessive</li>
        <li>Fer à repasser</li>
        <li>Planche à repasser</li>
      </ul>
      <button class="amenity-toggle-btn">Afficher plus</button>
    </div>

    <!-- 8) Cuisine et salle à manger -->
    <div class="amenity-block" data-default-items="4" data-mobile-items="4">
      <div class="amenity-header">
        <h3><i class="amenity-icon fas fa-utensils"></i>Cuisine et salle à manger</h3>
      </div>
      <ul>
        <li>Cuisine entièrement équipée</li>
        <li>Réfrigérateur en acier inoxydable avec congélateur en bas</li>
        <li>Four Samsung à technologie induction et à convection</li>
	<li>Lave-vaisselle</li>        
	<li>Cafetière Nespresso (petites capsules)</li>
	<li>Cafetière à filtre</li>
        <li>Micro-ondes</li>
  	<li>Four à raclette</li>
        <li>Équipement pour fondue</li>
        <li>Bouilloire électrique</li>
        <li>Grille-pain</li>
        <li>Mélangeur électrique</li>
        <li>Ustensiles et accessoires de cuisine : casseroles, poêles, huile, sel et poivre</li>
        <li>Vaisselle et couverts complets : assiettes, bols, verres, tasses, baguettes, verres à vin</li>
        <li>Barbecue au gaz (disponible du 1er avril à la fin septembre)</li>
        <li>Grande table à manger</li>
	<li>Verres à vin</li>
      </ul>
      <button class="amenity-toggle-btn">Afficher plus</button>
    </div>

    <!-- 9) Extérieur et équipements de plein air -->
    <div class="amenity-block" data-default-items="3" data-mobile-items="2">
      <div class="amenity-header">
        <h3><i class="amenity-icon fas fa-tree"></i>Extérieur et équipements de plein air</h3>
      </div>
      <ul>
	<li>Foyer extérieur</li>
        <li>Grande terrasse avec vue sur la nature et le parc du Mont-Orford</li>
        <li>Cour arrière privée</li>
        <li>Spa privé accessible toute l'année, 24 h/24</li>
        <li>Table et mobilier de jardin</li>
 	<li>Espace lecture et café au balcon de la chambre des maître</li>
        <li>Espace repas extérieur (BBQ au gaz et table extérieure)</li>
      </ul>
      <button class="amenity-toggle-btn">Afficher plus</button>
    </div>

    <!-- 10) Stationnement et véhicules électriques -->
    <div class="amenity-block" data-default-items="2" data-mobile-items="2">
      <div class="amenity-header">
        <h3><i class="amenity-icon fas fa-charging-station"></i>Stationnement et véhicules électriques</h3>
      </div>
      <ul>
        <li>3 places de stationnement</li>
        <li>Borne de recharge pour véhicule électrique (niveau 2)</li>
      </ul>
      <button class="amenity-toggle-btn">Afficher plus</button>
    </div>
  </div>

  <style>
  /* Amenities Section Styling */
  #amenities {
    padding: 2rem 0;
    font-family: 'Helvetica Neue', Arial, sans-serif;
  }

  #amenities h2 {
    text-align: center;
    margin-bottom: 2rem;
  }

  .amenity-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
    max-width: 1200px;
    margin: 0 auto;
  }

  .amenity-block {
    background-color: #f8f8f8;
    border-radius: 10px;
    padding: 1.5rem;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
    position: relative;
  }

  .amenity-block:hover {
    transform: scale(1.02);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
  }

  .amenity-header {
    margin-bottom: 1rem;
  }

  .amenity-block h3 {
    font-size: 1.2rem;
    margin: 0;
    display: flex;
    align-items: center;
  }

  .amenity-icon {
    margin-right: 0.8rem;
    font-size: 1.4rem;
    color: transparent;
    -webkit-text-stroke: 1px #333;
    /* Creates the white inside, black outline effect */
    background: white;
    border-radius: 50%;
    padding: 0.5rem;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  }

  .amenity-block ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .amenity-block ul li {
    padding: 0.5rem 0;
    display: flex;
    align-items: flex-start;
    line-height: 1.4;
  }

  /* Modified to remove checkmarks */
  .amenity-block ul li::before {
    content: "";
    margin-right: 0;
  }

  .amenity-block ul li.hidden-item {
    display: none;
  }

  .amenity-toggle-btn {
    background: none;
    border: none;
    color: #777777; /* Changed from blue to grey */
    cursor: pointer;
    padding: 0.5rem 0;
    font-size: 0.9rem;
    text-decoration: underline;
    display: none; /* Hidden by default, will be shown by JS when needed */
    margin-top: 0.5rem;
    text-align: left;
  }

  .amenity-toggle-btn:hover {
    color: #555555; /* Darker grey for hover */
  }

  /* Expanded state styles */
  .amenity-block.expanded {
    background-color: #f0f0f0;
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .amenity-grid {
      grid-template-columns: 1fr;
      gap: 1rem;
    }

    .amenity-block {
      padding: 1.2rem;
    }
  }

  @media (min-width: 769px) and (max-width: 1024px) {
    /* Tablet-specific styles */
    .amenity-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }
  </style>

  <!-- Include Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

  <script>
  // Completely standalone script that won't interfere with other code
  (function() {
    // Initialize amenities section when DOM is ready
    function initAmenities() {
      const amenityBlocks = document.querySelectorAll('#amenities .amenity-block');
      let allExpanded = false;
  
      // Function to determine how many items to show based on screen size
      function getItemsToShow(block) {
        if (window.innerWidth <= 768) {
          return parseInt(block.getAttribute('data-mobile-items'), 10) || 2;
        } else {
          return parseInt(block.getAttribute('data-default-items'), 10) || 3;
        }
      }
      
      // Check if a block needs a toggle button
      function checkToggleButtonVisibility(block) {
        const listItems = block.querySelectorAll('li');
        const toggleBtn = block.querySelector('.amenity-toggle-btn');
        const itemsToShow = getItemsToShow(block);
        
        // Only show toggle button if there are more items than the default to show
        if (listItems.length > itemsToShow) {
          toggleBtn.style.display = 'block';
        } else {
          toggleBtn.style.display = 'none';
        }
      }
      
      // Initial setup for each block
      function setupBlocks() {
        amenityBlocks.forEach(block => {
          const listItems = block.querySelectorAll('li');
          const toggleBtn = block.querySelector('.amenity-toggle-btn');
          const itemsToShow = getItemsToShow(block);
          
          // Hide items beyond the limit
          listItems.forEach((item, index) => {
            if (index >= itemsToShow) {
              item.classList.add('hidden-item');
            } else {
              item.classList.remove('hidden-item');
            }
          });
          
          // Update button text
          toggleBtn.textContent = 'Afficher plus';
          block.classList.remove('expanded');
          
          // Check if toggle button should be visible
          checkToggleButtonVisibility(block);
        });
      }
      
      // Function to expand a specific block
      function expandBlock(block) {
        const listItems = block.querySelectorAll('li');
        const toggleBtn = block.querySelector('.amenity-toggle-btn');
        
        listItems.forEach(item => {
          item.classList.remove('hidden-item');
        });
        
        toggleBtn.textContent = 'Afficher moins';
        block.classList.add('expanded');
      }
      
      // Function to collapse a specific block
      function collapseBlock(block) {
        const listItems = block.querySelectorAll('li');
        const toggleBtn = block.querySelector('.amenity-toggle-btn');
        const itemsToShow = getItemsToShow(block);
        
        listItems.forEach((item, index) => {
          if (index >= itemsToShow) {
            item.classList.add('hidden-item');
          }
        });
        
        toggleBtn.textContent = 'Afficher plus';
        block.classList.remove('expanded');
      }
      
      // Function to expand all blocks
      function expandAllBlocks() {
        allExpanded = true;
        
        amenityBlocks.forEach(block => {
          expandBlock(block);
        });
      }
      
      // Function to collapse all blocks
      function collapseAllBlocks() {
        allExpanded = false;
        
        amenityBlocks.forEach(block => {
          collapseBlock(block);
        });
      }
      
      // Add click handlers to each block
      amenityBlocks.forEach(block => {
        const toggleBtn = block.querySelector('.amenity-toggle-btn');
        
        // Make the entire block clickable (except the button)
        block.addEventListener('click', function(e) {
          if (e.target.classList.contains('amenity-toggle-btn') || 
              e.target.closest('.amenity-toggle-btn')) {
            return; // Let the button handle its own click
          }
          
          // Toggle expansion of this specific block
          if (this.classList.contains('expanded')) {
            collapseBlock(this);
          } else {
            expandBlock(this);
          }
        });
        
        // Toggle button click handler
        toggleBtn.addEventListener('click', function(e) {
          e.stopPropagation(); // Prevent parent block click
          
          const parentBlock = this.closest('.amenity-block');
          
          if (this.textContent === 'Afficher plus') {
            expandBlock(parentBlock);
          } else {
            collapseBlock(parentBlock);
          }
        });
      });
      
      // Initial setup
      setupBlocks();
      
      // Handle window resize
      window.addEventListener('resize', function() {
        // Preserve expansion state during resize
        const expandedBlocks = document.querySelectorAll('#amenities .amenity-block.expanded');
        const wasExpanded = expandedBlocks.length > 0;
        
        // Re-setup all blocks with new responsive settings
        setupBlocks();
        
        // Restore expansion for previously expanded blocks
        if (wasExpanded) {
          expandedBlocks.forEach(block => {
            expandBlock(block);
          });
        }
        
        // Update toggle button visibility
        amenityBlocks.forEach(checkToggleButtonVisibility);
      });
    }
    
    // Initialize when the DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initAmenities);
    } else {
      initAmenities();
    }
  })(); // Self-executing function to avoid global scope pollution
  </script>
</section>